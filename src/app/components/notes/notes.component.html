<div class="container">
  <h2 class="title">
    <span>📒</span>
    Smart Notes
  </h2>

  <div class="stats-bar">
    <div class="stat">
      <div class="stat-number">{{ notes.length }}</div>
      <div class="stat-label">Total Notes</div>
    </div>
    <div class="stat">
      <div class="stat-number">{{ getTotalCharacters() | number }}</div>
      <div class="stat-label">Characters</div>
    </div>
    <div class="stat">
      <div class="stat-number">💡</div>
      <div class="stat-label">Ideas Captured</div>
    </div>
  </div>

  <!-- Search Section -->
  <div class="search-section">
    <div class="search-input-group">
      <input
        [(ngModel)]="searchQuery"
        (input)="searchNotes()"
        placeholder="🔍 Search your notes..."
        class="search-input"
      />
      <button
        *ngIf="searchQuery"
        (click)="clearSearch()"
        class="clear-search-btn"
        title="Clear search"
      >
        ✖️
      </button>
    </div>
  </div>

  <div class="input-section">
    <div class="editing-indicator" *ngIf="editingNote">
      <span>✏️ Editing: {{ editingNote.title }}</span>
      <button (click)="cancelEdit()" class="cancel-edit-btn">Cancel</button>
    </div>

    <input 
      [(ngModel)]="noteTitle" 
      placeholder="✨ What's on your mind?" 
      class="input-field"
      [disabled]="isLoading"
      #titleInput>
    
    <textarea 
      [(ngModel)]="noteText" 
      placeholder="Write your brilliant thoughts here... 🧠💭" 
      class="textarea"
      [disabled]="isLoading"
      #textInput></textarea>
    
    <button 
      (click)="addNote()" 
      class="button"
      [disabled]="(!noteTitle.trim() && !noteText.trim()) || isLoading">
      <span *ngIf="!isLoading">
        {{ editingNote ? '💾 Update Note' : '🎯 Capture Idea' }}
      </span>
      <span *ngIf="isLoading">
        {{ editingNote ? '⏳ Updating...' : '⏳ Saving...' }}
      </span>
    </button>
    
    <div class="keyboard-hint">
      <small>💡 Pro tip: Press <kbd>Ctrl + Enter</kbd> to quickly save notes!</small>
      <small *ngIf="editingNote"> Press <kbd>Escape</kbd> to cancel editing.</small>
    </div>
  </div>

  <div class="error-message" *ngIf="errorMessage">
    {{ errorMessage }}
  </div>

  <ul class="paste-list" *ngIf="notes.length > 0">
    <li *ngFor="let note of notes" class="paste-item">
      <div>
        <strong>📌 {{ note.title }}</strong>
        <div class="timestamp">
          ⏰ Created: {{ formatDate(note.createdAt) }}
          <span *ngIf="note.updatedAt !== note.createdAt">
            • Updated: {{ formatDate(note.updatedAt) }}
          </span>
        </div>
        <div class="note-text">{{ note.content }}</div>
      </div>
      <div class="actions">
        <button 
          (click)="editNote(note)" 
          class="edit-btn"
          title="Edit note">
          ✏️ Edit
        </button>
        <button 
          (click)="deleteNote(note.id)" 
          class="delete-btn"
          title="Delete note">
          🗑️ Delete
        </button>
      </div>
    </li>
  </ul>

  <div *ngIf="notes.length === 0 && !isLoading" class="empty-state">
    <span class="emoji">🤔</span>
    <h3>{{ searchQuery ? 'No notes found' : 'No notes yet!' }}</h3>
    <p>{{ searchQuery ? 'Try a different search term' : 'Start capturing your brilliant ideas above' }}</p>
  </div>
</div>